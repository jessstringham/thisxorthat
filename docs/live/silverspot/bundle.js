(()=>{"use strict";var t={256:(t,e,n)=>{t.exports=n.p+"795c9349b795613e9a1a.wasm"}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}let r;n.m=t,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href;const o=new Array(128).fill(void 0);function i(t){return o[t]}o.push(void 0,null,!0,!1);let a=o.length;function s(t){a===o.length&&o.push(o.length+1);const e=a;if(a=o[e],"number"!=typeof a)throw new Error("corrupt heap");return o[e]=t,e}function c(t,e){try{return t.apply(this,e)}catch(t){r.__wbindgen_exn_store(s(t))}}function l(t,e){try{return t.apply(this,e)}catch(t){let e=function(){try{return t instanceof Error?`${t.message}\n\nStack:\n${t.stack}`:t.toString()}catch(t){return"<failed to stringify thrown value>"}}();throw console.error("wasm-bindgen: imported JS function that was not marked as `catch` threw an error:",e),t}}const _="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&_.decode();let u=null;function d(){return null!==u&&0!==u.byteLength||(u=new Uint8Array(r.memory.buffer)),u}function w(t,e){return t>>>=0,_.decode(d().subarray(t,t+e))}let f=0;const g="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},m="function"==typeof g.encodeInto?function(t,e){return g.encodeInto(t,e)}:function(t,e){const n=g.encode(t);return e.set(n),{read:t.length,written:n.length}};function b(t,e,n){if("string"!=typeof t)throw new Error("expected a string argument, found "+typeof t);if(void 0===n){const n=g.encode(t),r=e(n.length,1)>>>0;return d().subarray(r,r+n.length).set(n),f=n.length,r}let r=t.length,o=e(r,1)>>>0;const i=d();let a=0;for(;a<r;a++){const e=t.charCodeAt(a);if(e>127)break;i[o+a]=e}if(a!==r){0!==a&&(t=t.slice(a)),o=n(o,r,r=a+3*t.length,1)>>>0;const e=d().subarray(o+a,o+r),i=m(t,e);if(i.read!==t.length)throw new Error("failed to pass whole string");a+=i.written,o=n(o,r,a,1)>>>0}return f=a,o}let p=null;function h(){return(null===p||!0===p.buffer.detached||void 0===p.buffer.detached&&p.buffer!==r.memory.buffer)&&(p=new DataView(r.memory.buffer)),p}function y(t){return null==t}function v(t){const e=i(t);return function(t){t<132||(o[t]=a,a=t)}(t),e}function E(t){if("boolean"!=typeof t)throw new Error("expected a boolean argument, found "+typeof t)}const x="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>{r.__wbindgen_export_4.get(t.dtor)(t.a,t.b)}));function A(t){const e=typeof t;if("number"==e||"boolean"==e||null==t)return`${t}`;if("string"==e)return`"${t}"`;if("symbol"==e){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const e=t.length;let n="[";e>0&&(n+=A(t[0]));for(let r=1;r<e;r++)n+=", "+A(t[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(!(n&&n.length>1))return toString.call(t);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(t)+")"}catch(t){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:r}let L=null;function S(t){const e=function(t,e){const n=e(4*t.length,4)>>>0;return(null!==L&&0!==L.byteLength||(L=new Float32Array(r.memory.buffer)),L).set(t,n/4),f=t.length,n}(t,r.__wbindgen_malloc),n=f;return v(r.gen_from_rn(e,n))}function M(t){if("number"!=typeof t)throw new Error("expected a number argument, found "+typeof t)}function k(t,e){t>>>=0;const n=h(),r=[];for(let o=t;o<t+4*e;o+=4)r.push(v(n.getUint32(o,!0)));return r}function C(t,e,n){M(t),M(e),r._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h532a6080c5d0b46e(t,e,s(n))}const I="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>r.__wbg_murreletmodel_free(t>>>0,1)));class T{static __wrap(t){t>>>=0;const e=Object.create(T.prototype);return e.__wbg_ptr=t,I.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,I.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_murreletmodel_free(t,0)}constructor(t){const e=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),n=f;return v(r.murreletmodel_new(e,n))}update_config(t){let e,n;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const a=r.__wbindgen_add_to_stack_pointer(-16);M(this.__wbg_ptr);const s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.murreletmodel_update_config(a,this.__wbg_ptr,s,c);var o=h().getInt32(a+0,!0),i=h().getInt32(a+4,!0);return e=o,n=i,w(o,i)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,n,1)}}update_frame(t,e,n,o,i,a){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");M(this.__wbg_ptr),function(t){if("bigint"!=typeof t)throw new Error("expected a bigint argument, found "+typeof t)}(t),E(a),r.murreletmodel_update_frame(this.__wbg_ptr,t,e,n,o,i,a)}canvas_ids(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const o=r.__wbindgen_add_to_stack_pointer(-16);M(this.__wbg_ptr),r.murreletmodel_canvas_ids(o,this.__wbg_ptr);var t=h().getInt32(o+0,!0),e=h().getInt32(o+4,!0),n=k(t,e).slice();return r.__wbindgen_free(t,4*e,4),n}finally{r.__wbindgen_add_to_stack_pointer(16)}}make_img_defs(){let t,e;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=r.__wbindgen_add_to_stack_pointer(-16);M(this.__wbg_ptr),r.murreletmodel_make_img_defs(i,this.__wbg_ptr);var n=h().getInt32(i+0,!0),o=h().getInt32(i+4,!0);return t=n,e=o,w(n,o)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}draw_err(){let t,e;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=r.__wbindgen_add_to_stack_pointer(-16);M(this.__wbg_ptr),r.murreletmodel_draw_err(i,this.__wbg_ptr);var n=h().getInt32(i+0,!0),o=h().getInt32(i+4,!0);return t=n,e=o,w(n,o)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}draw(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const o=r.__wbindgen_add_to_stack_pointer(-16);M(this.__wbg_ptr),r.murreletmodel_draw(o,this.__wbg_ptr);var t=h().getInt32(o+0,!0),e=h().getInt32(o+4,!0),n=k(t,e).slice();return r.__wbindgen_free(t,4*e,4),n}finally{r.__wbindgen_add_to_stack_pointer(16)}}fps(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return M(this.__wbg_ptr),r.murreletmodel_fps(this.__wbg_ptr)}bg_color(){let t,e;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=r.__wbindgen_add_to_stack_pointer(-16);M(this.__wbg_ptr),r.murreletmodel_bg_color(i,this.__wbg_ptr);var n=h().getInt32(i+0,!0),o=h().getInt32(i+4,!0);return t=n,e=o,w(n,o)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}}const R="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>r.__wbg_wasmmurreletmodelresult_free(t>>>0,1)));class O{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t>>>=0;const e=Object.create(O.prototype);return e.__wbg_ptr=t,R.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,R.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_wasmmurreletmodelresult_free(t,0)}is_err(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return M(this.__wbg_ptr),0!==r.wasmmurreletmodelresult_is_err(this.__wbg_ptr)}err_msg(){let t,e;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=this.__destroy_into_raw(),a=r.__wbindgen_add_to_stack_pointer(-16);M(i),r.wasmmurreletmodelresult_err_msg(a,i);var n=h().getInt32(a+0,!0),o=h().getInt32(a+4,!0);return t=n,e=o,w(n,o)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}to_model(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const t=this.__destroy_into_raw();M(t);const e=r.wasmmurreletmodelresult_to_model(t);return T.__wrap(e)}}function F(){const t={wbg:{}};return t.wbg.__wbg_call_672a4d21634d4a24=function(){return c((function(t,e){return s(i(t).call(i(e)))}),arguments)},t.wbg.__wbg_call_7cccdd69e0791ae2=function(){return c((function(t,e,n){return s(i(t).call(i(e),i(n)))}),arguments)},t.wbg.__wbg_error_7534b8e9a36f1ab4=function(){return l((function(t,e){let n,o;try{n=t,o=e,console.error(w(t,e))}finally{r.__wbindgen_free(n,o,1)}}),arguments)},t.wbg.__wbg_new_23a2665fac83c611=function(){return l((function(t,e){try{var n={a:t,b:e};const o=new Promise(((t,e)=>{const o=n.a;n.a=0;try{return function(t,e,n,o){M(t),M(e),r.wasm_bindgen__convert__closures__invoke2_mut__hb75425aa2cc73394(t,e,s(n),s(o))}(o,n.b,t,e)}finally{n.a=o}}));return s(o)}finally{n.a=n.b=0}}),arguments)},t.wbg.__wbg_new_8a6f238a6ece86ea=function(){return l((function(){return s(new Error)}),arguments)},t.wbg.__wbg_newnoargs_105ed471475aaf50=function(){return l((function(t,e){return s(new Function(w(t,e)))}),arguments)},t.wbg.__wbg_now_0bab97e4f4650974=function(){return l((function(){return Date.now()}),arguments)},t.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(){return l((function(t){queueMicrotask(i(t))}),arguments)},t.wbg.__wbg_queueMicrotask_d3219def82552485=function(){return l((function(t){return s(i(t).queueMicrotask)}),arguments)},t.wbg.__wbg_resolve_4851785c9c5f573d=function(){return l((function(t){return s(Promise.resolve(i(t)))}),arguments)},t.wbg.__wbg_stack_0ed75d68575b0f3c=function(){return l((function(t,e){const n=b(i(e).stack,r.__wbindgen_malloc,r.__wbindgen_realloc),o=f;h().setInt32(t+4,o,!0),h().setInt32(t+0,n,!0)}),arguments)},t.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){return l((function(){const t="undefined"==typeof global?null:global;return y(t)?0:s(t)}),arguments)},t.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){return l((function(){const t="undefined"==typeof globalThis?null:globalThis;return y(t)?0:s(t)}),arguments)},t.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){return l((function(){const t="undefined"==typeof self?null:self;return y(t)?0:s(t)}),arguments)},t.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){return l((function(){const t="undefined"==typeof window?null:window;return y(t)?0:s(t)}),arguments)},t.wbg.__wbg_then_44b73946d2fb3e7d=function(){return l((function(t,e){return s(i(t).then(i(e)))}),arguments)},t.wbg.__wbg_wasmmurreletmodelresult_new=function(){return l((function(t){return s(O.__wrap(t))}),arguments)},t.wbg.__wbindgen_cb_drop=function(t){const e=v(t).original;if(1==e.cnt--)return e.a=0,!0;const n=!1;return E(n),n},t.wbg.__wbindgen_closure_wrapper3754=function(){return l((function(t,e,n){const o=function(t,e,n,o){const i={a:t,b:e,cnt:1,dtor:153},a=(...t)=>{i.cnt++;const e=i.a;i.a=0;try{return o(e,i.b,...t)}finally{0==--i.cnt?(r.__wbindgen_export_4.get(i.dtor)(e,i.b),x.unregister(i)):i.a=e}};return a.original=i,x.register(a,i,i),a}(t,e,0,C);return s(o)}),arguments)},t.wbg.__wbindgen_debug_string=function(t,e){const n=b(A(i(e)),r.__wbindgen_malloc,r.__wbindgen_realloc),o=f;h().setInt32(t+4,o,!0),h().setInt32(t+0,n,!0)},t.wbg.__wbindgen_is_function=function(t){const e="function"==typeof i(t);return E(e),e},t.wbg.__wbindgen_is_undefined=function(t){const e=void 0===i(t);return E(e),e},t.wbg.__wbindgen_number_new=function(t){return s(t)},t.wbg.__wbindgen_object_clone_ref=function(t){return s(i(t))},t.wbg.__wbindgen_object_drop_ref=function(t){v(t)},t.wbg.__wbindgen_string_new=function(t,e){return s(w(t,e))},t.wbg.__wbindgen_throw=function(t,e){throw new Error(w(t,e))},t}async function W(t){if(void 0!==r)return r;void 0!==t&&(Object.getPrototypeOf(t)===Object.prototype?({module_or_path:t}=t):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===t&&(t=new URL(n(256),n.b));const e=F();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:i}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return function(t,e){return r=t.exports,W.__wbindgen_wasm_module=e,p=null,L=null,u=null,r}(o,i)}const q=W,$="http://www.w3.org/2000/svg",j=Math.pow(10,4);function U(t){let e=[];for(let r=0;r<t.length;r++)e.push((n=Math.round(t[r]*j)/j)>=1?(j-1)/j:n<0?0:n);var n;return e}function B(t){let e=[];for(let n=0;n<t.length;n++)e.push(String(Math.round(t[n]*j)).padStart(4,"0"));return e.join("-")}function P(t){let e=t.split("-"),n=[];for(let t=0;t<e.length;t++)n.push(parseInt(e[t])/j);return n}function N(){return P(new URLSearchParams(window.location.search).get("cubed"))}const D={time:{},ctx:""};class z{constructor(t){this.murrelet=null,this.svg=t,this.mouse_x=0,this.mouse_y=0,this.mouse_down=!1,this.dim_x=600,this.dim_y=600,this.frame=1n,this.fps=30,this.lastUpdate=performance.now()}async initModel(t){console.log("init model");try{let e=await function(t){const e=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),n=f;return v(r.new_model(e,n))}(t);e.is_err()?(console.log("ERROR",e.err_msg()),document.getElementById("err_msg").innerHTML=e.err_msg()):(this.murrelet=e.to_model(),console.log("model init"))}catch(t){console.error("init failed",t)}}paths(){return this.svg.getElementById("paths")}async reload(t){var e="";const n=JSON.stringify(t);return null===this.murrelet&&await this.initModel(n),null!==this.murrelet&&("Success!"==(e=this.murrelet.update_config(n))&&(e=this.murrelet.draw_err()),this.fps=this.murrelet.fps(),this.updateWindowSize()),e}updateMurreletWithWorld(){null!==this.murrelet&&this.murrelet.update_frame(this.frame,this.dim_x,this.dim_y,this.mouse_x,this.mouse_y,this.mouse_down)}updateWindowSize(){const t=this.svg.getBoundingClientRect();this.dim_x=t.width,this.dim_y=t.height}mouseMove(t){const e=this.svg.getBoundingClientRect();this.mouse_x=t.clientX-e.left,this.mouse_y=t.clientY-e.top}mouseDown(){this.mouseDown=!0}mouseUp(){this.mouseDown=!1}updateAndDraw(){if(null!==this.murrelet){const t=performance.now();{this.updateMurreletWithWorld();let e=this.murrelet.draw();this.paths().innerHTML=e[1],this.lastUpdate=t,this.bgColor=this.murrelet.bg_color(),this.svg.style.backgroundColor=this.bgColor}this.frame+=1n}}}async function J(t,e){const n=await S(e),r=JSON.parse(n),o={app:D,drawing:r};let i=await t.reload(o);return""!=i?(console.log(n),console.log(i),!1):(t.updateAndDraw(),!0)}function H(t=0,e=1){let n=0,r=0;for(;0===n;)n=Math.random();for(;0===r;)r=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r)*e+t}function G(t,e){const n=e.getElementById("paths"),r=n.getBBox(),o=400-(r.x+r.width/2),i=400-(r.y+r.height/2);n.setAttribute("transform",`translate(${o}, ${i})`),t.classList.add("visible")}function Y(t){let e=document.createElementNS($,"svg");e.setAttribute("viewBox","0 0 800 800");let n=document.createElementNS($,"g");return n.id="paths",e.appendChild(n),t.appendChild(e),e}async function V(t,e){let n;for(let r=0;r<30&&(n=Array.from({length:e},(()=>Math.random())),!await J(t,n));r++)console.log("trying again");return n}let X=!1;async function K(t){if(X)return;X=!0;const e=document.body.clientWidth,n=Math.floor(e/201),o=Math.floor(500/174),i=Math.max(n*o,10),a=5*Math.floor(i/5);var s=new z;let c=await v(r.rn_count()),l=0;for(let e=0;e<a;e++){let e;for(let n=0;n<5;n++){let r=document.createElement("div");r.classList.add("explore-example"),t.appendChild(r);const o=Y(r);let i;s.svg=o,0==n?(e=await V(s,c),i=e):(i=U(e.map((t=>t+H(0,.05)))),await J(s,i)||(console.log("invalid, starting over"),i=await V(s,c))),r.setAttribute("data-embedding",B(i)),r.addEventListener("click",(()=>{const t=new URL(window.location.href);t.searchParams.set("cubed",r.getAttribute("data-embedding")),window.location.href=t.toString(),history.pushState(null,"",t.toString())})),requestAnimationFrame((()=>{requestAnimationFrame((()=>{G(r,o)}))})),await new Promise((t=>setTimeout(t,10))),l+=1}}X=!1}async function Q(){let t=document.createElement("div");t.classList.add("container"),t.id="exploreContainer",document.body.appendChild(t);let e=document.createElement("div");e.classList.add("explore-flex"),t.appendChild(e);const n=function(t){let e=0;return function(...n){const r=Date.now();r-e>=100&&(e=r,t.apply(this,n))}}((()=>{t.scrollTop+t.clientHeight>=t.scrollHeight-300&&K(e)}));t.addEventListener("scroll",n),K(e)}function Z(t,e,n,r,o,i,a){let s=[];for(let c=0;c<t.length;c++)s.push(t[c]+o*e[c]+i*n[c]+a*r[c]);return U(s)}function tt(t){let e=Array.from({length:t},(()=>Math.random()));const n=e.reduce(((t,e)=>t+e),0);return e.map((t=>t/n))}function et(t,e){return t.map((t=>t*e))}let nt=30;async function rt(t,e,n){if(X)return;X=!0;let r=n.length;const o=tt(r),i=tt(r),a=tt(r);let s=et(o,nt*r/100),c=et(i,nt*r/100),l=et(a,nt*r/100);for(let r=0;r<7;r++)for(let o=0;o<7;o++){let i=e[o][r];const a=i.getAttribute("data-qrs"),[_,u,d]=a.split(",").map(Number),w=0==_&&0==u&&0==d;if(Math.abs(_)>3||Math.abs(u)>3||Math.abs(d)>3);else{let e=Z(n,s,c,l,_/3,u/3,d/3),r=i.querySelector("svg");const o=Y(i);o.classList.add("cube-row-box-wrapper"),t.svg=o,await J(t,e),w&&(document.body.style.backgroundColor=t.bgColor),i.setAttribute("data-embedding",B(e)),r&&setTimeout((()=>{r.remove()}),1e3),requestAnimationFrame((()=>{requestAnimationFrame((()=>{G(i,o)}))})),await new Promise((t=>setTimeout(t,1))),o.offsetWidth,o.classList.add("fade-in")}}X=!1}!async function(){await q();const t=new URLSearchParams(window.location.search);if(t.has("perterb")){const e=t.get("cubed"),n=t.get("perterb"),r=t.get("idx");await async function(t,e,n){const r=P(t),o=document.createElement("select");o.id="default-select",document.body.appendChild(o);const i=document.createElement("select");i.id="indexSelect",document.body.appendChild(i);let a=n;n||(a=Math.floor(Math.random()*r.length));let s=document.createElement("pre");s.innerText=a+"\n",document.body.appendChild(s);let c=document.createElement("div"),l=document.createElement("div");l.addEventListener("input",(async()=>{scrollBox.innerText=l.value,nt=l.value;let t=N();await rt(d,divs,t)})),document.body.appendChild(c);let _=document.createElement("div");_.classList.add("container"),document.body.appendChild(_);let u=document.createElement("div");u.classList.add("perterb-row-doc"),_.appendChild(u);var d=new z;Array(r.length).fill(0)[a]=parseFloat(e);for(let t=0;t<5;t++){let e=r.map((t=>t));e[a]=t/4;let n=document.createElement("div");n.classList.add("perterb-container"),u.appendChild(n),2==t&&n.classList.add("perterb-center"),n.setAttribute("data-embedding",B(r)),n.addEventListener("mouseover",(async()=>{let t=await S(e);w.innerHTML=JSON.stringify(JSON.parse(t),null,"\t")}));const o=Y(n);d.svg=o,await J(d,e),requestAnimationFrame((()=>{requestAnimationFrame((()=>{G(n,o)}))}))}let w=document.createElement("pre");w.classList.add("perterb-row-doc"),_.appendChild(w);const f=r.length;for(let t=0;t<f;t++){let e=document.createElement("option");e.value=t,e.textContent=t,i.appendChild(e)}const g=new URLSearchParams(window.location.search).get("idx");null!==g&&(i.value=g),i.addEventListener("change",(function(){const t=i.value,e=new URL(window.location.href);e.searchParams.set("idx",t),window.location.href=e.toString()}));let m=await S(r);w.innerHTML=JSON.stringify(JSON.parse(m),null,"\t")}(e,n,r)}else if(t.has("cubed")){const e=t.get("cubed"),[n,r,o]=await async function(t){let e=document.createElement("div");e.classList.add("cube-row-doc"),document.body.appendChild(e);let n=document.createElement("div");n.classList.add("cube-holder"),e.appendChild(n);const r=document.createElement("a"),o=window.location.origin+window.location.pathname.split("/").slice(0,-1).join("/");r.href=o,r.innerText="← Back",r.classList.add("back-button"),document.body.appendChild(r);const i=document.createElement("div");i.classList.add("slider-container");const a=document.createElement("input");a.type="range",a.min="1",a.max="100",a.value=nt,a.classList.add("scroll-slider");const s=document.createElement("div");s.classList.add("scroll-box"),s.innerText=nt,i.appendChild(s),i.appendChild(a),document.body.appendChild(i),a.addEventListener("input",(async()=>{s.innerText=a.value,nt=a.value;let t=N();await rt(l,_,t)}));const c=P(t);var l=new z;const _=function(t,e){let n=document.createElement("div");n.classList.add("dark-overlay"),document.body.appendChild(n);let r=[];for(let e=0;e<7;e++){let n=document.createElement("div");n.classList.add("cube-row-container"),n.style.height="180px",n.style.width="1260px",t.appendChild(n);let o=[];for(let t=0;t<7;t++){let r=document.createElement("div");r.classList.add("cube-row-box"),r.style.height="180px",n.appendChild(r);let i=t-3,a=e-3;t%2==0&&(r.style.transform="translateY(90px)");let s=i,c=a-Math.floor(s/2),l=-s-c;r.setAttribute("data-qrs",`${s},${c},${l}`),o.push(r)}r.push(o)}for(let t=0;t<7;t++)for(let n=0;n<7;n++){const o=r[t][n],i=o.getAttribute("data-qrs"),[a,s,c]=i.split(",").map(Number);Math.abs(a)>3||Math.abs(s)>3||Math.abs(c)>3||o.addEventListener("click",(()=>{const t=new URL(window.location.href);let n=o.getAttribute("data-embedding");t.searchParams.set("cubed",n),history.pushState(null,"",t.toString()),rt(e,r,P(n))}))}return r}(n,l);return[l,_,c]}(e);rt(n,r,o)}else await Q()}()})();